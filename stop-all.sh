#!/bin/bash

echo "๐ ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะต ะฟัะพัะตััั ะฝะฐ ะฟะพััะฐั 3001 ะธ 5173..."

# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะพัะตััั ะฝะฐ ะฟะพััั 3001 (ัะตัะฒะตั)
echo "๐ก ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ัะตัะฒะตั ะฝะฐ ะฟะพััั 3001..."
PIDS_3001=$(lsof -ti:3001)
if [ ! -z "$PIDS_3001" ]; then
    echo "ะะฐะนะดะตะฝั ะฟัะพัะตััั ะฝะฐ ะฟะพััั 3001: $PIDS_3001"
    kill -9 $PIDS_3001
    echo "โ ะัะพัะตััั ะฝะฐ ะฟะพััั 3001 ะพััะฐะฝะพะฒะปะตะฝั"
else
    echo "โน๏ธ ะัะพัะตััั ะฝะฐ ะฟะพััั 3001 ะฝะต ะฝะฐะนะดะตะฝั"
fi

# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะพัะตััั ะฝะฐ ะฟะพััั 5173 (ััะพะฝัะตะฝะด)
echo "๐จ ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ััะพะฝัะตะฝะด ะฝะฐ ะฟะพััั 5173..."
PIDS_5173=$(lsof -ti:5173)
if [ ! -z "$PIDS_5173" ]; then
    echo "ะะฐะนะดะตะฝั ะฟัะพัะตััั ะฝะฐ ะฟะพััั 5173: $PIDS_5173"
    kill -9 $PIDS_5173
    echo "โ ะัะพัะตััั ะฝะฐ ะฟะพััั 5173 ะพััะฐะฝะพะฒะปะตะฝั"
else
    echo "โน๏ธ ะัะพัะตััั ะฝะฐ ะฟะพััั 5173 ะฝะต ะฝะฐะนะดะตะฝั"
fi

# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะต node ะฟัะพัะตััั (ะฝะฐ ะฒััะบะธะน ัะปััะฐะน)
echo "๐ ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะต node ะฟัะพัะตััั..."
NODE_PIDS=$(pgrep -f "node.*community-graph")
if [ ! -z "$NODE_PIDS" ]; then
    echo "ะะฐะนะดะตะฝั node ะฟัะพัะตััั: $NODE_PIDS"
    kill -9 $NODE_PIDS
    echo "โ Node ะฟัะพัะตััั ะพััะฐะฝะพะฒะปะตะฝั"
else
    echo "โน๏ธ Node ะฟัะพัะตััั ะฝะต ะฝะฐะนะดะตะฝั"
fi

# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะต vite ะฟัะพัะตััั
echo "โก ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะต vite ะฟัะพัะตััั..."
VITE_PIDS=$(pgrep -f "vite")
if [ ! -z "$VITE_PIDS" ]; then
    echo "ะะฐะนะดะตะฝั vite ะฟัะพัะตััั: $VITE_PIDS"
    kill -9 $VITE_PIDS
    echo "โ Vite ะฟัะพัะตััั ะพััะฐะฝะพะฒะปะตะฝั"
else
    echo "โน๏ธ Vite ะฟัะพัะตััั ะฝะต ะฝะฐะนะดะตะฝั"
fi

echo "๐ ะัะต ะฟัะพัะตััั ะพััะฐะฝะพะฒะปะตะฝั!"
echo "๐ ะกัะฐััั ะฟะพััะพะฒ:"
echo "ะะพัั 3001: $(lsof -i:3001 >/dev/null 2>&1 && echo 'โ ะะฐะฝัั' || echo 'โ ะกะฒะพะฑะพะดะตะฝ')"
echo "ะะพัั 5173: $(lsof -i:5173 >/dev/null 2>&1 && echo 'โ ะะฐะฝัั' || echo 'โ ะกะฒะพะฑะพะดะตะฝ')" 