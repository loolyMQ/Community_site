# üè† –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å home.mephi

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å home.mephi –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Ö –¥–∞–Ω–Ω—ã—Ö. –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é.

## üîß –ë—ã—Å—Ç—Ä–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ

### –í–∫–ª—é—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
```typescript
// –í —Ñ–∞–π–ª–µ src/services/homeMephiService.ts
const ENABLE_HOME_MEPHI_INTEGRATION = true; // –í–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
```

### –í–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
homeMephiService.toggleIntegration();
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –§–∞–π–ª—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
- `src/services/homeMephiService.ts` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `server/prisma/schema.prisma` - –ø–æ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- `src/components/AddReviewForm.tsx` - —Ñ–æ—Ä–º–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π home.mephi
- `src/components/AdminReviews.tsx` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –∞–¥–º–∏–Ω–∫–µ

### –ü–æ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

#### User –º–æ–¥–µ–ª—å:
```sql
homeMephiUserId       String?  @unique // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ home.mephi
homeMephiFirstName    String?  // –ò–º—è –∏–∑ home.mephi
homeMephiLastName     String?  // –§–∞–º–∏–ª–∏—è –∏–∑ home.mephi
homeMephiMiddleName   String?  // –û—Ç—á–µ—Å—Ç–≤–æ –∏–∑ home.mephi
homeMephiToken        String?  // –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –∫ home.mephi
homeMephiTokenExpires DateTime? // –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞
```

#### Review –º–æ–¥–µ–ª—å:
```sql
homeMephiUserId       String?  // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ home.mephi
homeMephiFirstName    String?  // –ò–º—è (–≤–∏–¥–Ω–æ –≤ –∞–¥–º–∏–Ω–∫–µ –¥–∞–∂–µ –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö)
homeMephiLastName     String?  // –§–∞–º–∏–ª–∏—è
homeMephiMiddleName   String?  // –û—Ç—á–µ—Å—Ç–≤–æ
homeMephiFaculty      String?  // –§–∞–∫—É–ª—å—Ç–µ—Ç
homeMephiCourse       Int?     // –ö—É—Ä—Å
homeMephiGroup        String?  // –ì—Ä—É–ø–ø–∞
homeMephiStudentId    String?  // –°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–π –±–∏–ª–µ—Ç
```

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å (–∑–∞–≥–ª—É—à–∫–∞):
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ home.mephi (–º–æ–∫)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∫)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Ç–∑—ã–≤—ã
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω–∫–µ (–¥–∞–∂–µ –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö

### üîÑ –ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
- –†–µ–∞–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ home.mephi API
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ home.mephi
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

## üöÄ API endpoints –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:
```typescript
// POST https://home.mephi.ru/api/auth/login
{
  "email": "user@mephi.ru",
  "password": "password"
}

// Response:
{
  "success": true,
  "user": {
    "id": "user-id",
    "email": "user@mephi.ru",
    "firstName": "–ò–≤–∞–Ω",
    "lastName": "–ò–≤–∞–Ω–æ–≤",
    "middleName": "–ò–≤–∞–Ω–æ–≤–∏—á",
    "faculty": "–ò–Ω—Å—Ç–∏—Ç—É—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫–∏–±–µ—Ä–Ω–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º",
    "course": 3,
    "group": "–ò–ö–ë–û-01-21",
    "studentId": "12345678"
  },
  "token": "jwt-token"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è:
```typescript
// GET https://home.mephi.ru/api/user/profile
// Headers: Authorization: Bearer {token}

// Response:
{
  "success": true,
  "user": {
    // —Ç–µ –∂–µ –ø–æ–ª—è, —á—Ç–æ –∏ –≤—ã—à–µ
  }
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞:
```typescript
// GET https://home.mephi.ru/api/auth/validate
// Headers: Authorization: Bearer {token}

// Response:
{
  "valid": true,
  "expiresAt": "2025-08-12T22:00:00Z"
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –æ—Ç–∑—ã–≤—ã:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Å—Ç–∞–≤–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π –æ—Ç–∑—ã–≤
- –î–∞–Ω–Ω—ã–µ –∏–∑ home.mephi —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ
- –í –∞–¥–º–∏–Ω–∫–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –≤–∏–¥—è—Ç –ø–æ–ª–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç–∑—ã–≤ –æ—Å—Ç–∞–µ—Ç—Å—è –∞–Ω–æ–Ω–∏–º–Ω—ã–º

### –¢–æ–∫–µ–Ω—ã:
- –¢–æ–∫–µ–Ω—ã home.mephi —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ HTTPS

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:
```typescript
// –í homeMephiService.ts –µ—Å—Ç—å –º–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
{
  'test@mephi.ru': {
    firstName: '–ò–≤–∞–Ω',
    lastName: '–ò–≤–∞–Ω–æ–≤',
    middleName: '–ò–≤–∞–Ω–æ–≤–∏—á',
    faculty: '–ò–Ω—Å—Ç–∏—Ç—É—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫–∏–±–µ—Ä–Ω–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º',
    course: 3,
    group: '–ò–ö–ë–û-01-21',
    studentId: '12345678'
  }
}
```

### –û—Ç–ª–∞–¥–∫–∞:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log(homeMephiService.getIntegrationStatus());
homeMephiService.toggleIntegration();
```

## üìù TODO –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. **–†–µ–∞–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
   - –ó–∞–º–µ–Ω–∏—Ç—å –º–æ–∫ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã
   - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - –î–æ–±–∞–≤–∏—Ç—å refresh —Ç–æ–∫–µ–Ω—ã

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
   - –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
   - –û—à–∏–±–∫–∏ API
   - Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é

4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - Unit —Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞
   - Integration —Ç–µ—Å—Ç—ã —Å API
   - E2E —Ç–µ—Å—Ç—ã

## üîó –°—Å—ã–ª–∫–∏

- **Home.mephi API**: https://home.mephi.ru/api
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**: (–Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç –∫–æ–º–∞–Ω–¥—ã home.mephi)
- **–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**: `server/prisma/schema.prisma`
- **–°–µ—Ä–≤–∏—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: `src/services/homeMephiService.ts`
